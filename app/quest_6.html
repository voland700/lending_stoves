<!--#set var="title" value="OptimizedHTML 5" -->
<!--#include virtual="/parts/header.html" -->
<div class="dell show">

	<div class="quest">
		<div class="quest_close_wrap">
			<span class="quest_btn_close"></span>
		</div>


		<div class="quest_wrap">
			<form action="#" method="post" class="quest_body" id="formBody">
				<input type="hidden" name="step" value="4">
				<input type="hidden" name="prev" value="5">
				<input type="hidden" name="next" value="6">
				<h3 class="quest_title">Есть ли у вас дополнительные пожелания?</h3>
				<div class="quest_inner">

					<div class="quest_conditions">
						<span class="quest_condition">можно пропустить</span>
					</div>

					<textarea class="quest_message" id="textMessage" name="message" rows="7"></textarea>

				</div>


				<div class="quest_footer">
					<div class="quest_footer_stap_wrap">
						<span>Шаг:</span> <span class="stap_namber">6</span> <span>из</span> <span>7</span>
					</div>


					<div class="quest_footer_btn_wrap"><!--  / atr for btn:   disabled="disabled" -->
						<button class="stap_btn_back" disabled="disabled">
							<span class="back_icon"><svg viewBox="0 0 24 24" class="mdi-icon mdi-24px">
								<title>mdi-arrow-left</title>
								<path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" stroke-width="0" fill-rule="nonzero"></path>
							</svg></span>
						</button>

						<button class="stap_btn_next last blick" id="btnNext" disabled="disabled">Последний шаг</button>



					</div>







				</div><!-- // footer -->

			</form>

			<div class="quest_info">

				<div class="quest_info_inner_user">
					<div class="quest_user_wrap">
						<div class="quest_user_img_wrap">
							<img src="/images/src/users/alex.jpg" alt="User" class="quest_user_img">
						</div>
						<div class="quest_user_name_wrap">
							<div class="quest_user_name">Алексей</div>
							<div class="quest_user_position">Старший манеджер</div>
						</div>
					</div>
					<div class="quest_info_massege">Чтобы получить объем помещения нужно перемножить три размера: длину, ширину и высоту комнаты. Можете пропустить этот вопрос если еще не рассчитали.</div>
				</div>

				<div class="quest_info_offers_wrap">
					<div class="quest_offer_item">
						<img src="/images/src/offers/present.png" alt="Offer" class="quest_offer_icon">
						<div class="quest_offer_text">Промокод на скидку 5%</div>
					</div>

					<div class="quest_offer_item">
						<img src="/images/src/offers/gerl.png" alt="Offer" class="quest_offer_icon">
						<div class="quest_offer_text">Персональное предложение</div>
					</div>
				</div>







			</div>
		</div>

	</div>



<script>
	//кнопка - Next активная при выборе варианта
	if(btnNext.disabled){
		const items = document.querySelectorAll('input[name="answer"]')
			items.forEach((item)=>{
				item.addEventListener('change', function () {
				btnNext.removeAttribute('disabled');
			});
		});
	}
	//кнопка - Next активная при выборе обязательного текстового поля
	if(document.getElementById('textMessage')) {
		let textMessage = document.getElementById('textMessage');
		if(textMessage.value == ''){
			textMessage.oninput = function () {
				if (btnNext.hasAttribute('disabled')){
					btnNext.removeAttribute('disabled');
				} else{
					return false;
				}
			};
		}
	}





	//console.log(document.getElementById('textMessage'));

		function serializeForm(formNode) {
			const { elements } = formNode
			let body = {};
			let answers = [];
			Array.from(elements).forEach((element) => {
				if (element.type == 'radio' && element.checked == true && !element.value == false) {
					body.answer = element.value
				}
				if (element.type == 'checkbox' && element.checked == true && !element.value == false) {
					answers.push(element.value);
				}
				if (element.type == 'text' && !element.value == false) {
					body.extra = element.value
				}
				if (element.type == 'hidden') {
					body[element.name] = element.value
				}
				if(element.type == 'textarea' && !element.value == false ){
					body[element.name] = element.value
				}
			})
			if (answers.length) body.answer = answers;
			//console.log(body);
			return body;
		}

		//btnNext.onclick = serializeForm(formBody);
		btnNext.addEventListener('click', function (e) {
			e.preventDefault();
			serializeForm(formBody);
		})




</script>















</div>



<!--#include virtual="/parts/footer.html" -->
